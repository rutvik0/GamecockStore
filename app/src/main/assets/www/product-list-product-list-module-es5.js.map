{"version":3,"sources":["webpack:///src/app/product-list/product-list.page.html","webpack:///src/app/product-list/product-list-routing.module.ts","webpack:///src/app/product-list/product-list.module.ts","webpack:///src/app/product-list/product-list.page.scss","webpack:///src/app/product-list/product-list.page.ts"],"names":["routes","path","component","ProductListPageRoutingModule","imports","forChild","exports","ProductListPageModule","declarations","ProductListPage","router","itemService","toastController","camera","navCtrl","file","img","display","imgfile","items","image","test","randomId","Math","random","toString","substr","getObservable","subscribe","data","currentUser","console","log","self","signOut","then","navigate","error","setUsertype","logoutToast","getUsertype","presentToast","create","color","message","duration","toast","present","item","options","quality","destinationType","DestinationType","DATA_URL","encodingType","EncodingType","JPEG","mediaType","MediaType","PICTURE","getPicture","result","pictures","ref","putString","storageRef","child","getDownloadURL","url","selector","template"],"mappings":"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","file":"product-list-product-list-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar mode=\\\"ios\\\">\\n    <ion-title>  Homepage </ion-title>\\n      <ion-buttons slot=\\\"end\\\">\\n       <ion-button (click)=\\\"openNewItemPage()\\\">\\n         <ion-icon slot=\\\"icon-only\\\" name=\\\"add-circle\\\"></ion-icon>\\n        </ion-button>\\n        <ion-button (click)=\\\"logout()\\\"><ion-icon name=\\\"log-in-outline\\\"></ion-icon></ion-button>\\n     </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content class=\\\"ion-padding\\\">\\n  <ion-img [src]=\\\"img\\\"></ion-img>\\n  <ion-list>\\n    <ion-item *ngFor=\\\"let item of items\\\" (click)=\\\"goToItem(item)\\\">\\n\\n      <ion-thumbnail slot=\\\"start\\\">\\n        <ion-img [src]=\\\"item.image\\\"></ion-img>\\n      </ion-thumbnail>\\n\\n      <ion-label>\\n        {{ item.title }}\\n      </ion-label>\\n      <ion-label>\\n        {{ item.category }}\\n      </ion-label>\\n      <ion-label>\\n       $ {{ item.price }}\\n      </ion-label>\\n    </ion-item>\\n  </ion-list>\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ProductListPage } from './product-list.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ProductListPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ProductListPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ProductListPageRoutingModule } from './product-list-routing.module';\n\nimport { ProductListPage } from './product-list.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ProductListPageRoutingModule\n  ],\n  declarations: [ProductListPage]\n})\nexport class ProductListPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3Byb2R1Y3QtbGlzdC9wcm9kdWN0LWxpc3QucGFnZS5zY3NzIn0= */\";","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ToastController, NavController } from '@ionic/angular';\nimport * as firebase from 'firebase';\nimport { ItemService } from '../item.service';\nimport { Camera, CameraOptions } from \"@ionic-native/camera/ngx\";\nimport { File } from '@ionic-native/file/ngx';\n\nexport interface MyData {\n  name: string;\n  filepath: string;\n  size: number;\n}\n\n@Component({\n  selector: 'app-product-list',\n  templateUrl: './product-list.page.html',\n  styleUrls: ['./product-list.page.scss'],\n})\n\nexport class ProductListPage implements OnInit {\n  \nimg=\"assets/white.png\";\ndisplay = \"\";\nimgfile = \"\";\nitems=[];\nimage = \"\";\ntest = \"\";\nrandomId = Math.random().toString(36).substr(2, 5);\n\n  constructor(\n    private router: Router,\n    public itemService: ItemService,\n    private toastController:ToastController,\n    private camera: Camera,\n    public navCtrl: NavController,\n    private file: File\n  ) { \n\n    this.itemService.getObservable().subscribe((data) => {\n      this.items = this.itemService.items;\n    });\n    \n    this.items = this.itemService.items;\n    \n    if (firebase.auth().currentUser == null) {\n      console.log(\"User not logged in\");\n    }\n  }\n\n  ngOnInit() {\n  }\n\n  logout() {\n    var self=this;\n    firebase.auth().signOut().then(function() {\n      console.log(\"Loggging Out\");\n      self.router.navigate([\"/login\"]);\n    }).catch(function(error) {\n      console.log(\"Error! Signout\")\n    });\n    this.itemService.setUsertype(\"visitor\");\n    this.logoutToast();\n  }\n\n  openNewItemPage() {\n    console.log(\"clicked me\");\n    \n    if (firebase.auth().currentUser ==  null){\n        console.log(\"user not logged in\");\n        console.log(\"log in please\")\n        this.router.navigate([\"/login\"]);\n    }\n\n    if (this.itemService.getUsertype() == 'owner'){\n      this.router.navigate([\"/add-product\"]);\n    }\n    else{\n      console.log(\"Only an owner can add items\");\n      this.presentToast();\n    }\n  }\nasync presentToast() {\n    const toast = await this.toastController.create({\n      color:'danger',\n      message: 'Only an owner can add items.',\n      duration: 2000\n    });\n    toast.present();\n  }\n\n  async logoutToast() {\n    const toast = await this.toastController.create({\n      color:'danger',\n      message: 'You have been logged out',\n      duration: 2000\n    });\n    toast.present();\n  }\n  goToItem(item) {\n    this.router.navigate([\"/product-detail\", item]);\n  }\n\n\n async pickImage() {\n   try {\n    const options: CameraOptions = {\n      quality:50,\n      destinationType: this.camera.DestinationType.DATA_URL,\n      encodingType: this.camera.EncodingType.JPEG,\n      mediaType: this.camera.MediaType.PICTURE\n    }\n    const result = await this.camera.getPicture(options);\n    const image = `data:image/jpeg;base64,${result}`;\n    const pictures = firebase.storage().ref(this.randomId);\n    pictures.putString(image, 'data_url');\n    \n  } catch(e) {\n    console.error(e);\n  }\n  }\n\n  download() {\n    var storageRef = firebase.storage().ref();\n    storageRef.child(this.randomId).getDownloadURL().then(function(url) {\n    })\n  }\n}"]}